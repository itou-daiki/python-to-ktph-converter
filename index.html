<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python ⇄ 共通テスト用プログラム表記 変換ツール</title>
    
    <!-- External CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material-darker.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/modal.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="assets/css/commontest-highlight.css">
    <link rel="stylesheet" href="assets/css/info-sections.css">
    
    <!-- External JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pyodide@0.24.1/pyodide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <h1>Python ⇄ 共通テスト用プログラム表記 変換ツール</h1>
        <p>Created by Dit-Lab.(Daiki ITO)・Shinichi UEGAKI</p>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Controls -->
        <div class="controls">
            <div class="sample-selector">
                <label for="sampleSelect">サンプル:</label>
                <select id="sampleSelect">
                    <option value="">サンプルを選択</option>
                    <option value="binary-search">二分探索</option>
                    <option value="bubble-sort">バブルソート</option>
                    <option value="linear-search">線形探索</option>
                    <option value="factorial">階乗計算</option>
                    <option value="fibonacci">フィボナッチ数列</option>
                    <option value="prime-check">素数判定</option>
                </select>
                <button class="load-sample-button">読込</button>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="main-content">
            <!-- Top Left: Python Code -->
            <div class="panel top-left">
                <div class="panel-header">
                    <span>Python</span>
                    <button class="copy-button python-copy-button">📋</button>
                </div>
                <div id="pythonEditor"></div>
            </div>
            
            <!-- Conversion Controls -->
            <div class="conversion-controls">
                <button class="convert-button-right" onclick="convertPythonToCommon()">→</button>
                <button class="convert-button-left" onclick="convertCommonToPython()">←</button>
                <button class="run-button">実行</button>
                <button class="clear-button">クリア</button>
            </div>
            
            <!-- Top Right: Common Test Notation -->
            <div class="panel top-right">
                <div class="panel-header">
                    <span>共通テスト用プログラム表記</span>
                    <button class="copy-button common-copy-button">📋</button>
                </div>
                <div id="commonTestEditor"></div>
            </div>
            
            <!-- Bottom Left: Flowchart -->
            <div class="panel bottom-left">
                <div class="panel-header">
                    <span>フローチャート</span>
                </div>
                <div id="flowchart"></div>
            </div>
            
            <!-- Bottom Right: Execution Output -->
            <div class="panel bottom-right">
                <div class="panel-header">
                    <span>実行結果</span>
                    <button class="copy-button" onclick="clearOutput()">クリア</button>
                </div>
                <div id="output"></div>
            </div>
        </div>

        <!-- Share Section -->
        <div class="share-section">
            <div class="panel-header">共有URL</div>
            <div class="share-url">
                <button class="copy-button share-generate-button">生成</button>
                <input type="text" id="shareUrl" readonly placeholder="共有URLをここに表示します">
                <a href="#" id="shareUrlLink" target="_blank" style="display: none; margin-left: 8px; color: #3498db; text-decoration: none;">🔗 開く</a>
                <button class="copy-button share-copy-button">📋 コピー</button>
            </div>
        </div>

        <!-- Python Notes Section -->
        <div class="info-section">
            <div class="panel-header">🐍 Python記述時の注意点</div>
            <div class="info-content">
                <div class="notes-grid">
                    <div class="note-item">
                        <h4>記号は半角で入力</h4>
                        <p><code>= : ( ) [ ] { } + - * / % == != < > <= >=</code><br>
                        全角文字を使うとエラーになります</p>
                    </div>
                    <div class="note-item">
                        <h4>文字列は「'」や「"」で囲う</h4>
                        <p><code>'文字列'</code> または <code>"文字列"</code><br>
                        全角の記号<code>’</code>、<code>”</code>はエラーになります</p>
                    </div>
                    <div class="note-item">
                        <h4>インデントは「タブ」</h4>
                        <p><strong>タブ</strong>や<strong>半角スペース4つ</strong>でインデントしてください<br>
                        <code>if</code>文、<code>for</code>文、<code>def</code>文の中身は必ずインデントが必要です</p>
                    </div>
                    <div class="note-item">
                        <h4>コロン（:）を忘れずに</h4>
                        <p><code>if</code>文、<code>for</code>文、<code>while</code>文、<code>def</code>文<br>
                        の末尾には<code>:</code>が必要<br>
                        セミコロン<code>;</code>ではないので注意</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Section -->
        <div class="info-section">
            <div class="panel-header">📊 Python ⇄ 共通テスト用プログラム表記 対応表</div>
            <div class="info-content">
                <div class="comparison-table">
                    <div class="comparison-category">
                        <h4>🔢 基本構文</h4>
                        <table>
                            <thead>
                                <tr><th>Python</th><th>共通テスト用プログラム表記</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>print("hello")</code></td><td><code>表示する("hello")</code></td></tr>
                                <tr><td><code>int(input())</code></td><td><code>【外部からの入力】</code></td></tr>
                                <tr><td><code>len(data)</code></td><td><code>要素数(data)</code></td></tr>
                                <tr><td><code>data = [1,2,3]</code></td><td><code>Data = [1,2,3]</code></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="comparison-category">
                        <h4>🔀 条件分岐</h4>
                        <table>
                            <thead>
                                <tr><th>Python</th><th>共通テスト用プログラム表記</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>if x < 5:</code></td><td><code>もし x < 5 ならば:</code></td></tr>
                                <tr><td><code>elif x == 10:</code></td><td><code>そうでなくもし x == 10 ならば:</code></td></tr>
                                <tr><td><code>else:</code></td><td><code>そうでなければ:</code></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="comparison-category">
                        <h4>🔄 繰り返し</h4>
                        <table>
                            <thead>
                                <tr><th>Python</th><th>共通テスト用プログラム表記</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>for i in range(5):</code></td><td><code>i を 0 から 4 まで 1 ずつ増やしながら繰り返す:</code>　※「減らしながら」 もあります。</td></tr>
                                <tr><td><code>while x < 10:</code></td><td><code>x < 10 の間繰り返す:</code></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="comparison-category">
                        <h4>🧮 演算子</h4>
                        <table>
                            <thead>
                                <tr><th>Python</th><th>共通テスト用プログラム表記</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>//</code> （整数除算）</td><td><code>÷</code></td></tr>
                                <tr><td><code>%</code> （余り）</td><td><code>％</code></td></tr>
                                <tr><td><code>**</code> （べき乗）</td><td><code>**</code></td></tr>
                                <tr><td><code>and, or, not</code></td><td><code>and, or, not</code></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="comparison-category">
                        <h4>🎯 制御記号</h4>
                        <table>
                            <thead>
                                <tr><th>意味</th><th>共通テスト用プログラム表記</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>ブロック内の継続行</td><td><code>｜</code> （縦線）</td></tr>
                                <tr><td>ブロックの最終行</td><td><code>⎿</code> （角括弧）</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals and Overlays -->
    <!-- Input Dialog Overlay -->
    <div class="overlay" id="overlay" onclick="closeInputDialog()"></div>
    
    <!-- Input Dialog -->
    <div class="input-dialog" id="inputDialog">
        <h3>入力</h3>
        <input type="text" id="userInput" placeholder="値を入力してください">
        <div style="margin-top: 10px; text-align: right;">
            <button onclick="submitInput()">OK</button>
            <button onclick="closeInputDialog()">キャンセル</button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Pyodideを初期化中...</p>
    </div>

    <!-- Footer with Detail Page Links -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-links">
                <h3>詳細情報</h3>
                <div class="detail-links">
                    <a href="python-overview.html" class="detail-link">
                        <span class="link-icon">🐍</span>
                        <div class="link-content">
                            <strong>Pythonの概要</strong>
                            <small>Python言語の基本構文と特徴について</small>
                        </div>
                    </a>
                    <a href="commontest-overview.html" class="detail-link">
                        <span class="link-icon">📚</span>
                        <div class="link-content">
                            <strong>共通テスト用プログラム表記の概要</strong>
                            <small>大学入学共通テストで使用されるプログラム表記について</small>
                        </div>
                    </a>
                </div>
            </div>
            <div class="footer-info">
                <p>Python ⇄ 共通テスト用プログラム表記 変換ツール</p>
                <p>Created by Dit-Lab.(Daiki ITO)・Shinichi UEGAKI</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Modules -->
    <script src="assets/js/modules/commontest-mode.js"></script>
    <script src="assets/js/modules/converter.js"></script>
    <script src="assets/js/modules/executor.js"></script>
    <script src="assets/js/modules/flowchart.js"></script>
    <script src="assets/js/modules/ui.js"></script>
    <script src="assets/js/app.js"></script>
</body>
</html>